<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>[백준] 17472. 다리 만들기 2 - Juneee blog</title><meta name=Description content><meta property="og:title" content="[백준] 17472. 다리 만들기 2"><meta property="og:description" content="문제 설명 문제 : 백준 17472번 - 다리 만들기 2
나라는 섬들로 이루어지고, 모든 섬을 다리로 연결하려고 한다. N×M 크기의 지도에서 1은 땅 0은 바다를 나타내며 섬은 연결된 땅이 상하좌우로 붙어있는 덩어리를 말한다. 섬과 섬간의 다리는 직선인 경우(가로, 세로)에만 성립하며 다리의 길이가 2이상 되어야한다.
모든 섬을 연결하는 다리 길이의 최솟값을 출력하며 모든 섬을 연결하는 것이 불가능한 경우에는 -1을 출력하도록 한다."><meta property="og:type" content="article"><meta property="og:url" content="https://altera520.github.io/posts/2020-12-29-b_17472/"><meta property="article:published_time" content="2020-12-29T16:17:52+09:00"><meta property="article:modified_time" content="2020-12-29T16:17:52+09:00"><meta name=twitter:card content="summary"><meta name=twitter:title content="[백준] 17472. 다리 만들기 2"><meta name=twitter:description content="문제 설명 문제 : 백준 17472번 - 다리 만들기 2
나라는 섬들로 이루어지고, 모든 섬을 다리로 연결하려고 한다. N×M 크기의 지도에서 1은 땅 0은 바다를 나타내며 섬은 연결된 땅이 상하좌우로 붙어있는 덩어리를 말한다. 섬과 섬간의 다리는 직선인 경우(가로, 세로)에만 성립하며 다리의 길이가 2이상 되어야한다.
모든 섬을 연결하는 다리 길이의 최솟값을 출력하며 모든 섬을 연결하는 것이 불가능한 경우에는 -1을 출력하도록 한다."><meta name=application-name content="Juneee blog"><meta name=apple-mobile-web-app-title content="Juneee blog"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=manifest href=/site.webmanifest><link rel=canonical href=https://altera520.github.io/posts/2020-12-29-b_17472/><link rel=prev href=https://altera520.github.io/posts/2020-12-28-b_8972/><link rel=next href=https://altera520.github.io/posts/2020-12-29-b_9466/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"[백준] 17472. 다리 만들기 2","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"https:\/\/altera520.github.io\/posts\/2020-12-29-b_17472\/"},"genre":"posts","keywords":"BOJ, Kruskal, DFS, BFS","wordcount":640,"url":"https:\/\/altera520.github.io\/posts\/2020-12-29-b_17472\/","datePublished":"2020-12-29T16:17:52+09:00","dateModified":"2020-12-29T16:17:52+09:00","publisher":{"@type":"Organization","name":"altera520"},"author":{"@type":"Person","name":"altera520"},"description":""}</script></head><body header-desktop=auto header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('light'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'light'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><img src=/images/shiba.png class=img-profile alt=main width=35 height=35>
<a href=/ title="Juneee blog">Juneee blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><span class="menu-item delimiter"></span><span class="menu-item search" id=search-desktop><input type=text placeholder="Search titles or contents..." id=search-input-desktop>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-desktop title=Search><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-desktop title=Clear><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-desktop><i class="fas fa-spinner fa-fw fa-spin"></i></span></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><img src=/images/shiba.png class=img-profile alt=main width=35 height=35>
<a href=/ title="Juneee blog">Juneee blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><div class=search-wrapper><div class="search mobile" id=search-mobile><input type=text placeholder="Search titles or contents..." id=search-input-mobile>
<a href=javascript:void(0); class="search-button search-toggle" id=search-toggle-mobile title=Search><i class="fas fa-search fa-fw"></i></a><a href=javascript:void(0); class="search-button search-clear" id=search-clear-mobile title=Clear><i class="fas fa-times-circle fa-fw"></i></a><span class="search-button search-loading" id=search-loading-mobile><i class="fas fa-spinner fa-fw fa-spin"></i></span></div><a href=javascript:void(0); class=search-cancel id=search-cancel-mobile>Cancel</a></div><a class=menu-item href=/posts/>Posts</a><a class=menu-item href=/tags/>Tags</a><a class=menu-item href=/categories/>Categories</a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><script>MathJax={tex:{inlineMath:[['$','$'],['\\(','\\)']],displayMath:[['$$','$$'],['\\[','\\]']],processEscapes:true,processEnvironments:true},options:{skipHtmlTags:['script','noscript','style','textarea','pre']}};window.addEventListener('load',(event)=>{document.querySelectorAll("mjx-container").forEach(function(x){x.parentElement.classList+=' has-jax'})});</script><script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script><script type=text/javascript id=MathJax-script async src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js></script><style>code.has-jax{font:inherit;font-size:100%;background:inherit;border:inherit;color:#515151}</style><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title><i class="fas fa-book"></i><span>index</span></h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">[백준] 17472. 다리 만들기 2</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>altera520</a></span>&nbsp;<span class=post-category>included in <a href=/categories/ps/><i class="far fa-folder fa-fw"></i>PS</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2020-12-29>2020-12-29</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;640 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span><i class="details-icon fas fa-angle-right"></i>index</span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><a href=#문제-설명>문제 설명</a></li><li><a href=#solution>Solution</a><ul><li><a href=#수행단계>수행단계</a></li></ul></li><li><a href=#code>Code</a></li></ul></nav></div></div><div class=content id=content><h2 id=문제-설명>문제 설명</h2><p><strong>문제</strong> : <a href=https://www.acmicpc.net/problem/17472 target=_blank rel="noopener noreffer">백준 17472번 - 다리 만들기 2</a></p><p>나라는 섬들로 이루어지고, 모든 섬을 다리로 연결하려고 한다.<br>N×M 크기의 지도에서 1은 땅 0은 바다를 나타내며 섬은 연결된 땅이 상하좌우로 붙어있는 덩어리를 말한다.<br>섬과 섬간의 다리는 직선인 경우(가로, 세로)에만 성립하며 다리의 길이가 2이상 되어야한다.</p><p>모든 섬을 연결하는 다리 길이의 최솟값을 출력하며 모든 섬을 연결하는 것이 불가능한 경우에는 -1을 출력하도록 한다.</p><br><h2 id=solution>Solution</h2><p>MST를 구하는 문제이다.<br>다른 일반적인 MST 문제는 정점의 번호와 간선 및 비용이 친절하게 주어지나, 이 문제는 지도를 통해 정점, 간선 및 비용을 직접 구해야한다.</p><p>BFS(또는 DFS)와 크루스칼을 조합하여 문제를 해결하는 방식이다보니 재미있게 풀었다.</p><h3 id=수행단계>수행단계</h3><ol><li><p><strong>섬들을 만든다</strong></p><ol><li><p>BFS또는 DFS를 통해 섬들을 탐색한다.</p></li><li><p>각 섬들에 인덱스를 매긴다.</p><a class=lightgallery href=/images/2020-12-29-b_17472/step1.png title=/images/2020-12-29-b_17472/step1.png data-thumbnail=/images/2020-12-29-b_17472/step1.png><img class=lazyload src=/svg/loading.min.svg data-src=/images/2020-12-29-b_17472/step1.png data-srcset="/images/2020-12-29-b_17472/step1.png, /images/2020-12-29-b_17472/step1.png 1.5x, /images/2020-12-29-b_17472/step1.png 2x" data-sizes=auto alt=/images/2020-12-29-b_17472/step1.png width=450></a></li></ol></li><li><p><strong>각 섬들을 잇는 모든 다리들을 구한다.</strong></p><ol><li><p>각 섬들을 구성하는 좌표마다 가로, 세로 탐색을 수행한다.</p></li><li><p>탐색 시 바다라면 카운트 값을 증가시킨다.</p></li><li><p>탐색 시 땅이라면 인덱스 값을 확인한다.<br>탐색이 시작된 땅의 인덱스값과 현재 도달한 땅의 인덱스 값이 다르면 카운트 값이 2이상인지 조회한다.<br>카운트 값이 2이상이라면 간선 리스트에 시작 인덱스, 종료 인덱스, 카운트 값을 하나의 간선 정보로 하여 포함시킨다.</p><a class=lightgallery href=/images/2020-12-29-b_17472/step2.png title=/images/2020-12-29-b_17472/step2.png data-thumbnail=/images/2020-12-29-b_17472/step2.png><img class=lazyload src=/svg/loading.min.svg data-src=/images/2020-12-29-b_17472/step2.png data-srcset="/images/2020-12-29-b_17472/step2.png, /images/2020-12-29-b_17472/step2.png 1.5x, /images/2020-12-29-b_17472/step2.png 2x" data-sizes=auto alt=/images/2020-12-29-b_17472/step2.png width=470></a></li></ol></li><li><p><strong>최소신장트리를 구한다.</strong></p><ol><li><p>간선 리스트에 포함된 간선들의 비용을 기준으로하여 정렬한다.</p></li><li><p>Union-find를 사용하여 MST를 구성하며 find가 수행될때마다 간선의 비용을 누적시키고 MST에 포함되는 노드 갯수를 1씩 증가시킨다.</p><a class=lightgallery href=/images/2020-12-29-b_17472/step3.png title=/images/2020-12-29-b_17472/step3.png data-thumbnail=/images/2020-12-29-b_17472/step3.png><img class=lazyload src=/svg/loading.min.svg data-src=/images/2020-12-29-b_17472/step3.png data-srcset="/images/2020-12-29-b_17472/step3.png, /images/2020-12-29-b_17472/step3.png 1.5x, /images/2020-12-29-b_17472/step3.png 2x" data-sizes=auto alt=/images/2020-12-29-b_17472/step3.png width=470></a></li></ol></li><li><p><strong>MST에 포함된 노드갯수와 섬들의 갯수 일치여부를 검사한다.</strong></p><ol><li>갯수가 일치하면 누적된 간선 비용 값을 출력한다.</li><li>갯수가 불일치시 -1을 출력한다.</li></ol></li></ol><h2 id=code>Code</h2><p>원본 배열(지도)에 정점의 인덱스 값을 할당해도 되겠지만, 본인은 <code>unordered_map</code>을 사용하여 해싱하는 방식으로 풀었다.<br>문제를 해결하는 것 외에도 본인만의 코딩컨벤션을 정립해서 읽기 쉬운 코드가 될 수 있도록 노력을 기울여야겠다.</p><br><div class=highlight><pre class=chroma><code class=language-cpp data-lang=cpp><span class=cp>#include</span> <span class=cpf>&lt;iostream&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;queue&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;unordered_map&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;vector&gt;</span><span class=cp>
</span><span class=cp>#include</span> <span class=cpf>&lt;algorithm&gt;</span><span class=cp>
</span><span class=cp></span>
<span class=cp>#define LAND 1
</span><span class=cp>#define LEN 11
</span><span class=cp>#define MAX 7
</span><span class=cp></span>
<span class=k>using</span> <span class=k>namespace</span> <span class=n>std</span><span class=p>;</span>

<span class=kt>int</span> <span class=n>country</span><span class=p>[</span><span class=n>LEN</span><span class=p>][</span><span class=n>LEN</span><span class=p>];</span>
<span class=kt>bool</span> <span class=n>visit</span><span class=p>[</span><span class=n>LEN</span><span class=p>][</span><span class=n>LEN</span><span class=p>];</span>
<span class=kt>int</span> <span class=n>dx</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>};</span>
<span class=kt>int</span> <span class=n>dy</span><span class=p>[]</span> <span class=o>=</span> <span class=p>{</span><span class=mi>0</span><span class=p>,</span> <span class=mi>0</span><span class=p>,</span> <span class=mi>1</span><span class=p>,</span> <span class=o>-</span><span class=mi>1</span><span class=p>};</span>

<span class=n>unordered_map</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span> <span class=kt>int</span><span class=o>&gt;</span> <span class=n>vertex_index</span><span class=p>;</span>
<span class=kt>int</span> <span class=n>sz</span> <span class=o>=</span> <span class=mi>1</span><span class=p>;</span>
<span class=n>vector</span><span class=o>&lt;</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>edge</span><span class=p>;</span> <span class=c1>//from ,to, cost
</span><span class=c1></span>
<span class=kt>int</span> <span class=n>root</span><span class=p>[</span><span class=n>MAX</span><span class=p>];</span>
<span class=kt>int</span> <span class=n>depth</span><span class=p>[</span><span class=n>MAX</span><span class=p>];</span> <span class=c1>//union by rank
</span><span class=c1></span>
<span class=kt>int</span> <span class=nf>hash_func</span><span class=p>(</span><span class=kt>int</span> <span class=n>y</span><span class=p>,</span> <span class=kt>int</span> <span class=n>x</span><span class=p>){</span>
    <span class=k>return</span> <span class=n>y</span><span class=o>*</span><span class=mi>10</span> <span class=o>+</span> <span class=n>x</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>void</span> <span class=nf>get_vertex</span><span class=p>(</span><span class=kt>int</span> <span class=n>m</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>){</span> <span class=c1>// y, x
</span><span class=c1></span>    <span class=n>queue</span><span class=o>&lt;</span><span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=o>&gt;&gt;</span> <span class=n>q</span><span class=p>;</span>

    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span> <span class=n>i</span><span class=o>&lt;=</span><span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>){</span>
        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>j</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span> <span class=n>j</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>){</span>
            <span class=k>if</span><span class=p>(</span><span class=n>country</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>==</span> <span class=n>LAND</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]){</span>
                <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>({</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>});</span> <span class=c1>//y,x
</span><span class=c1></span>                <span class=n>visit</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>

                <span class=k>while</span><span class=p>(</span><span class=o>!</span><span class=n>q</span><span class=p>.</span><span class=n>empty</span><span class=p>()){</span>
                    <span class=n>pair</span><span class=o>&lt;</span><span class=kt>int</span><span class=p>,</span><span class=kt>int</span><span class=o>&gt;</span> <span class=n>tmp</span> <span class=o>=</span> <span class=n>q</span><span class=p>.</span><span class=n>front</span><span class=p>();</span>

                    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>k</span><span class=o>=</span><span class=mi>0</span><span class=p>;</span> <span class=n>k</span><span class=o>&lt;</span><span class=mi>4</span><span class=p>;</span> <span class=n>k</span><span class=o>++</span><span class=p>){</span>
                        <span class=kt>int</span> <span class=n>y</span> <span class=o>=</span> <span class=n>tmp</span><span class=p>.</span><span class=n>first</span> <span class=o>+</span> <span class=n>dy</span><span class=p>[</span><span class=n>k</span><span class=p>];</span>
                        <span class=kt>int</span> <span class=n>x</span> <span class=o>=</span> <span class=n>tmp</span><span class=p>.</span><span class=n>second</span> <span class=o>+</span> <span class=n>dx</span><span class=p>[</span><span class=n>k</span><span class=p>];</span>

                        <span class=k>if</span><span class=p>(</span><span class=mi>1</span> <span class=o>&lt;=</span> <span class=n>x</span> <span class=o>&amp;&amp;</span> <span class=n>x</span> <span class=o>&lt;=</span> <span class=n>n</span> <span class=o>&amp;&amp;</span> <span class=mi>1</span> <span class=o>&lt;=</span> <span class=n>y</span> <span class=o>&amp;&amp;</span> <span class=n>y</span><span class=o>&lt;=</span> <span class=n>m</span><span class=p>){</span>
                            <span class=k>if</span><span class=p>(</span><span class=n>country</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>]</span> <span class=o>==</span> <span class=n>LAND</span> <span class=o>&amp;&amp;</span> <span class=o>!</span><span class=n>visit</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>]){</span>
                                <span class=n>q</span><span class=p>.</span><span class=n>push</span><span class=p>({</span><span class=n>y</span><span class=p>,</span> <span class=n>x</span><span class=p>});</span>
                                <span class=n>visit</span><span class=p>[</span><span class=n>y</span><span class=p>][</span><span class=n>x</span><span class=p>]</span> <span class=o>=</span> <span class=nb>true</span><span class=p>;</span>
                            <span class=p>}</span>
                        <span class=p>}</span>
                    <span class=p>}</span>

                    <span class=n>q</span><span class=p>.</span><span class=n>pop</span><span class=p>();</span>
                    <span class=n>vertex_index</span><span class=p>[</span><span class=n>hash_func</span><span class=p>(</span><span class=n>tmp</span><span class=p>.</span><span class=n>first</span><span class=p>,</span><span class=n>tmp</span><span class=p>.</span><span class=n>second</span><span class=p>)]</span> <span class=o>=</span> <span class=n>sz</span><span class=p>;</span>
                <span class=p>}</span>

                <span class=n>sz</span><span class=o>++</span><span class=p>;</span>
            <span class=p>}</span>
        <span class=p>}</span>
    <span class=p>}</span>
    <span class=n>sz</span><span class=o>--</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>void</span> <span class=nf>find_edge</span><span class=p>(</span><span class=kt>int</span> <span class=n>y</span><span class=p>,</span> <span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>bool</span> <span class=n>flag</span><span class=p>){</span>
    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span> <span class=n>i</span><span class=o>&lt;=</span><span class=n>y</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>){</span>
        <span class=kt>int</span> <span class=n>from</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>to</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>cost</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>

        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>j</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span> <span class=n>j</span><span class=o>&lt;=</span><span class=n>x</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>){</span>
            <span class=kt>int</span> <span class=n>node</span> <span class=o>=</span> <span class=n>flag</span> <span class=o>?</span> <span class=n>country</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>]</span> <span class=o>:</span> <span class=n>country</span><span class=p>[</span><span class=n>j</span><span class=p>][</span><span class=n>i</span><span class=p>];</span>
            <span class=k>if</span><span class=p>(</span><span class=n>node</span> <span class=o>==</span> <span class=n>LAND</span><span class=p>){</span>
                <span class=kt>int</span> <span class=n>tmp</span> <span class=o>=</span> <span class=n>flag</span> <span class=o>?</span> <span class=n>vertex_index</span><span class=p>[</span><span class=n>hash_func</span><span class=p>(</span><span class=n>i</span><span class=p>,</span><span class=n>j</span><span class=p>)]</span> <span class=o>:</span> <span class=n>vertex_index</span><span class=p>[</span><span class=n>hash_func</span><span class=p>(</span><span class=n>j</span><span class=p>,</span><span class=n>i</span><span class=p>)];</span>

                <span class=k>if</span><span class=p>(</span><span class=n>from</span> <span class=o>==</span> <span class=mi>0</span><span class=p>){</span>
                    <span class=n>from</span> <span class=o>=</span> <span class=n>tmp</span><span class=p>;</span>
                <span class=p>}</span>
                <span class=k>else</span><span class=p>{</span>
                    <span class=n>to</span> <span class=o>=</span> <span class=n>tmp</span><span class=p>;</span>

                    <span class=k>if</span><span class=p>(</span><span class=n>from</span> <span class=o>!=</span> <span class=n>to</span><span class=p>){</span> <span class=c1>//to를 만난 경우
</span><span class=c1></span>                        <span class=k>if</span><span class=p>(</span><span class=n>cost</span> <span class=o>&gt;=</span> <span class=mi>2</span><span class=p>){</span>
                            <span class=n>edge</span><span class=p>.</span><span class=n>push_back</span><span class=p>({</span><span class=n>from</span><span class=p>,</span> <span class=n>to</span><span class=p>,</span> <span class=n>cost</span><span class=p>});</span>
                        <span class=p>}</span>
                        <span class=n>cost</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                        <span class=n>from</span> <span class=o>=</span> <span class=n>to</span><span class=p>;</span>
                        <span class=n>to</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                    <span class=p>}</span>
                    <span class=k>else</span> <span class=n>cost</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
                <span class=p>}</span>
            <span class=p>}</span>
            <span class=k>else</span> <span class=k>if</span><span class=p>(</span><span class=n>from</span> <span class=o>!=</span> <span class=mi>0</span><span class=p>)</span> <span class=n>cost</span><span class=o>++</span><span class=p>;</span>
        <span class=p>}</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=kt>void</span> <span class=nf>get_edge</span><span class=p>(</span><span class=kt>int</span> <span class=n>m</span><span class=p>,</span> <span class=kt>int</span> <span class=n>n</span><span class=p>){</span>
    <span class=n>find_edge</span><span class=p>(</span><span class=n>m</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=nb>true</span><span class=p>);</span> <span class=c1>//horizontal
</span><span class=c1></span>    <span class=n>find_edge</span><span class=p>(</span><span class=n>n</span><span class=p>,</span> <span class=n>m</span><span class=p>,</span> <span class=nb>false</span><span class=p>);</span> <span class=c1>//vertical
</span><span class=c1></span><span class=p>}</span>

<span class=kt>bool</span> <span class=nf>cmp</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>t</span><span class=p>,</span> <span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=o>&amp;</span><span class=n>u</span><span class=p>){</span>
    <span class=k>return</span> <span class=n>t</span><span class=p>[</span><span class=mi>2</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>u</span><span class=p>[</span><span class=mi>2</span><span class=p>];</span> <span class=c1>//cost 기준
</span><span class=c1></span><span class=p>}</span>

<span class=kt>void</span> <span class=nf>init</span><span class=p>(</span><span class=kt>int</span> <span class=n>n</span><span class=p>){</span>
    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span> <span class=n>i</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>){</span>
        <span class=n>root</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=n>i</span><span class=p>;</span>
        <span class=n>depth</span><span class=p>[</span><span class=n>i</span><span class=p>]</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=kt>int</span> <span class=nf>find</span><span class=p>(</span><span class=kt>int</span> <span class=n>node</span><span class=p>){</span>
    <span class=k>if</span><span class=p>(</span><span class=n>root</span><span class=p>[</span><span class=n>node</span><span class=p>]</span> <span class=o>==</span> <span class=n>node</span><span class=p>){</span>
        <span class=k>return</span> <span class=n>node</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=k>else</span><span class=p>{</span>
        <span class=k>return</span> <span class=n>root</span><span class=p>[</span><span class=n>node</span><span class=p>]</span> <span class=o>=</span> <span class=n>find</span><span class=p>(</span><span class=n>root</span><span class=p>[</span><span class=n>node</span><span class=p>]);</span>
    <span class=p>}</span>
<span class=p>}</span>

<span class=kt>bool</span> <span class=nf>do_union</span><span class=p>(</span><span class=kt>int</span> <span class=n>x</span><span class=p>,</span> <span class=kt>int</span> <span class=n>y</span><span class=p>){</span>
    <span class=n>x</span> <span class=o>=</span> <span class=n>find</span><span class=p>(</span><span class=n>x</span><span class=p>);</span>
    <span class=n>y</span> <span class=o>=</span> <span class=n>find</span><span class=p>(</span><span class=n>y</span><span class=p>);</span>

    <span class=k>if</span><span class=p>(</span><span class=n>x</span><span class=o>==</span><span class=n>y</span><span class=p>)</span> <span class=k>return</span> <span class=nb>false</span><span class=p>;</span>

    <span class=k>if</span><span class=p>(</span><span class=n>depth</span><span class=p>[</span><span class=n>x</span><span class=p>]</span> <span class=o>&lt;</span> <span class=n>depth</span><span class=p>[</span><span class=n>y</span><span class=p>]){</span>
        <span class=n>root</span><span class=p>[</span><span class=n>x</span><span class=p>]</span> <span class=o>=</span> <span class=n>y</span><span class=p>;</span>
    <span class=p>}</span>
    <span class=k>else</span><span class=p>{</span>
        <span class=n>root</span><span class=p>[</span><span class=n>y</span><span class=p>]</span> <span class=o>=</span> <span class=n>x</span><span class=p>;</span>

        <span class=k>if</span><span class=p>(</span><span class=n>depth</span><span class=p>[</span><span class=n>x</span><span class=p>]</span> <span class=o>==</span> <span class=n>depth</span><span class=p>[</span><span class=n>y</span><span class=p>]){</span>
            <span class=n>depth</span><span class=p>[</span><span class=n>x</span><span class=p>]</span><span class=o>++</span><span class=p>;</span>
        <span class=p>}</span>
    <span class=p>}</span>
    
    <span class=k>return</span> <span class=nb>true</span><span class=p>;</span>
<span class=p>}</span>

<span class=kt>int</span> <span class=nf>main</span><span class=p>()</span> <span class=p>{</span>
    <span class=kt>int</span> <span class=n>m</span><span class=p>,</span> <span class=n>n</span><span class=p>,</span> <span class=n>cnt</span> <span class=o>=</span> <span class=mi>0</span><span class=p>,</span> <span class=n>answer</span> <span class=o>=</span> <span class=mi>0</span><span class=p>;</span>
    <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>m</span> <span class=o>&gt;&gt;</span> <span class=n>n</span><span class=p>;</span>

    <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>i</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span> <span class=n>i</span><span class=o>&lt;=</span><span class=n>m</span><span class=p>;</span> <span class=n>i</span><span class=o>++</span><span class=p>){</span>
        <span class=k>for</span><span class=p>(</span><span class=kt>int</span> <span class=n>j</span><span class=o>=</span><span class=mi>1</span><span class=p>;</span> <span class=n>j</span><span class=o>&lt;=</span><span class=n>n</span><span class=p>;</span> <span class=n>j</span><span class=o>++</span><span class=p>){</span>
            <span class=n>cin</span> <span class=o>&gt;&gt;</span> <span class=n>country</span><span class=p>[</span><span class=n>i</span><span class=p>][</span><span class=n>j</span><span class=p>];</span>
        <span class=p>}</span>
    <span class=p>}</span>

    <span class=n>get_vertex</span><span class=p>(</span><span class=n>m</span><span class=p>,</span> <span class=n>n</span><span class=p>);</span>
    <span class=n>get_edge</span><span class=p>(</span><span class=n>m</span><span class=p>,</span> <span class=n>n</span><span class=p>);</span>
    <span class=n>sort</span><span class=p>(</span><span class=n>edge</span><span class=p>.</span><span class=n>begin</span><span class=p>(),</span> <span class=n>edge</span><span class=p>.</span><span class=n>end</span><span class=p>(),</span> <span class=n>cmp</span><span class=p>);</span>

    <span class=n>init</span><span class=p>(</span><span class=n>MAX</span> <span class=o>-</span> <span class=mi>1</span><span class=p>);</span>

    <span class=k>for</span><span class=p>(</span><span class=n>vector</span><span class=o>&lt;</span><span class=kt>int</span><span class=o>&gt;</span> <span class=nl>e</span> <span class=p>:</span> <span class=n>edge</span><span class=p>){</span>
        <span class=k>if</span><span class=p>(</span><span class=n>do_union</span><span class=p>(</span><span class=n>e</span><span class=p>[</span><span class=mi>0</span><span class=p>],</span> <span class=n>e</span><span class=p>[</span><span class=mi>1</span><span class=p>])){</span>
            <span class=n>answer</span> <span class=o>+=</span> <span class=n>e</span><span class=p>[</span><span class=mi>2</span><span class=p>];</span>
            <span class=n>cnt</span><span class=o>++</span><span class=p>;</span>
        <span class=p>}</span>

        <span class=k>if</span><span class=p>(</span><span class=n>cnt</span> <span class=o>==</span> <span class=n>sz</span><span class=o>-</span><span class=mi>1</span><span class=p>)</span> <span class=k>break</span><span class=p>;</span>
    <span class=p>}</span>

    <span class=k>if</span><span class=p>(</span><span class=n>sz</span> <span class=o>&lt;</span> <span class=mi>2</span> <span class=o>||</span> <span class=n>cnt</span> <span class=o>!=</span> <span class=n>sz</span> <span class=o>-</span> <span class=mi>1</span><span class=p>)</span> <span class=n>answer</span> <span class=o>=</span> <span class=o>-</span><span class=mi>1</span><span class=p>;</span>

    <span class=n>cout</span> <span class=o>&lt;&lt;</span> <span class=n>answer</span><span class=p>;</span>
<span class=p>}</span>
</code></pre></div></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2020-12-29</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=https://altera520.github.io/posts/2020-12-29-b_17472/ data-title="[백준] 17472. 다리 만들기 2" data-hashtags=BOJ,Kruskal,DFS,BFS><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=https://altera520.github.io/posts/2020-12-29-b_17472/ data-hashtag=BOJ><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=https://altera520.github.io/posts/2020-12-29-b_17472/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on Line" data-sharer=line data-url=https://altera520.github.io/posts/2020-12-29-b_17472/ data-title="[백준] 17472. 다리 만들기 2"><i data-svg-src=/lib/simple-icons/icons/line.min.svg></i></a></span></div></div></div><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/boj/>BOJ</a>,&nbsp;<a href=/tags/kruskal/>Kruskal</a>,&nbsp;<a href=/tags/dfs/>DFS</a>,&nbsp;<a href=/tags/bfs/>BFS</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/posts/2020-12-28-b_8972/ class=prev rel=prev title="[백준] 8972. 미친 아두이노">← </i>[백준] 8972. 미친 아두이노</a>
<a href=/posts/2020-12-29-b_9466/ class=next rel=next title="[백준] 9466. 텀 프로젝트">[백준] 9466. 텀 프로젝트 →</a></div></div><div id=comments><div id=utterances></div><noscript>Please enable JavaScript to view the comments powered by <a href=https://utteranc.es/>Utterances</a>.</noscript></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.75.1">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2020 - 2021</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>altera520</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><link rel=stylesheet href=/lib/lightgallery/lightgallery.min.css><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/autocomplete/autocomplete.min.js></script><script type=text/javascript src=/lib/algoliasearch/algoliasearch-lite.umd.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/lightgallery/lightgallery.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-thumbnail.min.js></script><script type=text/javascript src=/lib/lightgallery/lg-zoom.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":500},"comment":{"utterances":{"darkTheme":"github-dark","issueTerm":"title","label":"comment","lightTheme":"github-light","repo":"Altera520/blog-comment"}},"lightGallery":{"actualSize":false,"exThumbImage":"data-thumbnail","hideBarsDelay":2000,"selector":".lightgallery","speed":400,"thumbContHeight":80,"thumbWidth":80,"thumbnail":true},"search":{"algoliaAppID":"Z6XUTBRBTU","algoliaIndex":"tech_blog","algoliaSearchKey":"93666bf981eb546301c54c0d60833095","highlightTag":"em","maxResultLength":10,"noResultsFound":"No results found","snippetLength":30,"type":"algolia"}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','G-0HZQPQBVVJ',{'anonymize_ip':true});</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=G-0HZQPQBVVJ" async></script></body></html>